(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(11),o=n.n(r),s=(n(88),n(25)),c=n(20),l=n(28),u=n(26),d=n(14),f=n(27),h=n(17),m=n.n(h),p=n(33),b=n.n(p),v=n(200),y=n(204),k=n(203),E=n(202),O=n(205),j=n(201),g=n(44),C=n(193),S=n(153),A=n(195),x=n(197),z=n(199),w=n(196),F=n(206),N=n(71),M=n.n(N),T=n(69),_=n.n(T),W=n(70),B=n.n(W),J=n(198),V=n(66),q=n.n(V),I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).editorWillMount=n.editorWillMount.bind(Object(d.a)(n)),n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"editorWillMount",value:function(e){}},{key:"render",value:function(){var e=this.props.content,t=JSON.stringify(e,null,2);return i.a.createElement(q.a,{defaultValue:t,editorWillMount:this.editorWillMount,height:200,language:"json",ref:"monaco",theme:"vs-dark"})}}]),t}(i.a.Component),D=n(74),R=n(48),U=n.n(R),G=n(67),H=n.n(G),K="https://hear2learn.azurewebsites.net/_analyze";function L(e,t){var n=e.definition;return H.a.post(K,Object(D.a)({},n,{text:t})).then(function(t){var n=t.data.tokens;return m.a.assign({},e,{tokens:n})})}var P=Object(C.a)(function(e){return{chip:{margin:e.spacing(1)}}}),Q="visual",X="New Analyzer",Y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={mode:e.mode||Q,name:e.name||X},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onEdit=n.onEdit.bind(Object(d.a)(n)),n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"onEdit",value:function(){this.setState({mode:"edit"})}},{key:"onChange",value:function(){var e=this.props.onChange,t=JSON.parse(this.refs.editor.refs.monaco.editor.getValue());this.setState({mode:Q,name:this.nameField.value}),m.a.isFunction(e)&&e({definition:t,name:this.nameField.value})}},{key:"inEditMode",value:function(){return"edit"===this.state.mode}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.definition,r=t.description,o=t.onClose,s=this.state.name;return i.a.createElement(A.a,{className:n},i.a.createElement(w.a,{action:i.a.createElement(x.a,{disableSpacing:!0},this.inEditMode()?i.a.createElement(J.a,{onClick:this.onChange},i.a.createElement(_.a,null)):i.a.createElement(J.a,{onClick:this.onEdit},i.a.createElement(B.a,null)),i.a.createElement(J.a,{onClick:o},i.a.createElement(M.a,null))),subheader:r,title:this.inEditMode()?i.a.createElement(O.a,{inputRef:function(t){return e.nameField=t},variant:"filled",defaultValue:s}):s}),i.a.createElement(z.a,null,this.inEditMode()?i.a.createElement(I,{content:a,ref:"editor"}):i.a.createElement(ee,this.props)))}}]),t}(i.a.Component);var Z,$=(Z=Y,function(e){function t(e){var n;Object(s.a)(this,t);var a=e.definition,i=e.tokens;return(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=n.onChange.bind(Object(d.a)(n)),n.updateAnalysis=n.updateAnalysis.bind(Object(d.a)(n)),n.state={definition:a,tokens:i},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateAnalysis()}},{key:"onChange",value:function(e){var t=e.definition;this.setState({definition:t},this.updateAnalysis)}},{key:"updateAnalysis",value:function(){var e=this,t=this.props.text,n=this.state.definition,a=function(e){var t=e.analyzer,n=e.char_filter,a=e.filter,i=e.tokenizer;return m.a.compact([t&&"Analyzer: ".concat(t),i&&"Tokenizer: ".concat(i),n&&"Character Filters: ".concat(m.a.castArray(n).join(" + ")),a&&"Filters: ".concat(m.a.castArray(a).join(" + "))]).join(", ")}(n);L({definition:n},t).then(function(t){var n=t.tokens;e.setState({description:a,tokens:n})})}},{key:"render",value:function(){var e=this.state,t=e.definition,n=e.description,a=e.tokens;return i.a.createElement(Z,Object.assign({},this.props,{definition:t,description:n,onChange:this.onChange,tokens:a}))}}]),t}(i.a.Component)),ee=function(e){var t=e.onTokenSelect,n=e.selectedStartOffset,a=e.tokens,r=P(),o=m.a.map(a,function(e){return i.a.createElement(F.a,{avatar:i.a.createElement(S.a,null,e.start_offset),className:r.chip,color:n===e.start_offset?"primary":void 0,key:e.start_offset,label:e.token,onClick:function(){return t(e.start_offset)}})});return i.a.createElement(i.a.Fragment,null,o)};var te="<p>The quick brown fox jumps over the quick dog.</p>",ne=[{name:"Standard Analyzer",definition:{analyzer:"standard"},key:b()()},{name:"Stop Analyzer",definition:{analyzer:"stop"},key:b()()},{name:"Custom Analyzer",definition:{tokenizer:"standard",char_filter:["html_strip"],filter:["lowercase","kstem"]},key:b()()}],ae=Object(C.a)(function(e){return{app:{backgroundColor:"#fbfbfb"},appBarSpacer:e.mixins.toolbar,chip:{margin:e.spacing(1)},section:{marginBottom:e.spacing(4),marginTop:e.spacing(4)}}}),ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={text:te,analyses:ne},n.createCloseFn=n.createCloseFn.bind(Object(d.a)(n)),n.onAdd=n.onAdd.bind(Object(d.a)(n)),n.onChange=m.a.debounce(n.onChange.bind(Object(d.a)(n)),750),n.onClose=n.onClose.bind(Object(d.a)(n)),n.onTokenSelect=n.onTokenSelect.bind(Object(d.a)(n)),n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"createCloseFn",value:function(e){var t=this;return function(){t.onClose(e)}}},{key:"onClose",value:function(e){var t=this.state.analyses;this.setState({analyses:m.a.filter(t,function(t,n){return t.key!==e&&e!==n})})}},{key:"onChange",value:function(){var e=this,t=this.state;(function(e,t){return U.a.mapSeries(e,function(e){return L(e,t).catch(function(t){return console.error("Unable to fetch updated analysis for:",e),U.a.resolve(e)})})})(t.analyses,t.text).then(function(t){return e.setState({analyses:t})})}},{key:"onAdd",value:function(){var e=this.state.analyses,t=m.a.assign({},e[0],{key:b()(),mode:"edit"});this.setState({analyses:m.a.concat(t,e)})}},{key:"onTokenSelect",value:function(e){var t=this.state.selectedStartOffset===e?null:e;this.setState({selectedStartOffset:t})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.analyses,r=n.selectedStartOffset,o=n.text;return i.a.createElement("div",{className:t.app},i.a.createElement(v.a,{position:"absolute"},i.a.createElement(j.a,null,i.a.createElement(g.a,{variant:"h6"},"Elasticsearch Analysis Inspector"))),i.a.createElement("div",{className:t.appBarSpacer}),i.a.createElement(E.a,{container:!0},i.a.createElement(E.a,{item:!0,xs:12},i.a.createElement(k.a,{className:t.section},i.a.createElement(O.a,{defaultValue:o,fullWidth:!0,label:"Text",onChange:function(t){var n=t.target.value;t.persist(),e.setState({text:n},e.onChange)},variant:"outlined"}))),i.a.createElement(E.a,{item:!0,xs:12},i.a.createElement(k.a,null,i.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.onAdd,style:{float:"right"}},"New Analyzer"))),i.a.createElement(E.a,{item:!0,xs:12},i.a.createElement(k.a,null,m.a.map(a,function(n){return i.a.createElement($,Object.assign({},n,{className:t.section,key:n.key,onClose:e.createCloseFn(n.key),onTokenSelect:e.onTokenSelect,selectedStartOffset:r,text:o}))})))))}}]),t}(i.a.Component);var re=function(e){var t=ae();return i.a.createElement(ie,Object.assign({classes:t},e))};o.a.render(i.a.createElement(re,null),document.getElementById("root"))},83:function(e,t,n){e.exports=n(154)},88:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.062530d9.chunk.js.map