(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){e.exports=a(184)},117:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(11),o=a.n(r),l=(a(117),a(33)),s=a(23),c=a(35),u=a(34),d=a(15),p=a(36),h=a(12),m=a.n(h),f=a(43),g=a.n(f),b=a(226),v=a(237),y=a(228),k=a(236),C=a(238),E=a(235),O=a(58),j=a(224),S=a(234),_=a(183),z=a(229),x=a(231),T=a(233),w=a(230),F=a(242),A=a(96),P=a.n(A),N=a(94),M=a.n(N),I=a(95),V=a.n(I),W=a(232),D=a(30),J=a(31),q=a(83),B=a.n(q),R=a(84),L=a.n(R),U=a(239),G=a(91),H=a.n(G),K=a(92),Q=a.n(K),X=a(103),Y=a(240),Z=a(227),$=["custom","keyword","pattern","simple","standard","stop","whitespace"],ee=a(101),te=a(63),ae=a(85),ne=a.n(ae),ie=a(99),re=a(8),oe=a(86),le=a(241),se=a(89),ce=a.n(se),ue=Object(j.a)(function(e){return{input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(re.b)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},divider:{height:e.spacing(2)}}});function de(e){var t=e.inputRef,a=Object(te.a)(e,["inputRef"]);return i.a.createElement("div",Object.assign({ref:t},a))}var pe={Control:function(e){var t=e.children,a=e.innerProps,n=e.innerRef,r=e.selectProps,o=r.classes,l=r.TextFieldProps;return i.a.createElement(C.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:de,inputProps:Object(J.a)({className:o.input,ref:n,children:t},a)}},l))},Menu:function(e){return i.a.createElement(X.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return i.a.createElement(F.a,{tabIndex:-1,label:e.children,className:ne()(e.selectProps.classes.chip,Object(D.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:i.a.createElement(ce.a,e.removeProps)})},NoOptionsMessage:function(e){return i.a.createElement(O.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return i.a.createElement(le.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){var t=e.selectProps,a=e.innerProps,n=void 0===a?{}:a,r=e.children;return i.a.createElement(O.a,Object.assign({color:"textSecondary",className:t.classes.placeholder},n),r)},SingleValue:function(e){return i.a.createElement(O.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return i.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}};function he(e){var t=e.label,a=e.onChange,n=Object(te.a)(e,["label","onChange"]),r=ue(),o=Object(oe.a)(),l=i.a.useState(null),s=Object(ee.a)(l,2),c=s[0],u=s[1];var d={input:function(e){return Object(J.a)({},e,{color:o.palette.text.primary,"& input":{font:"inherit"}})}};return i.a.createElement(ie.a,Object.assign({classes:r,styles:d,inputId:"react-select-single",TextFieldProps:{label:t,InputLabelProps:{htmlFor:"react-select-single",shrink:!0}},components:pe,value:c,onChange:function(e){m.a.isFunction(a)&&a(e),u(e)}},n))}var me=m.a.map($,ye),fe=m.a.map(["html_strip","mapping","pattern_replace"],ye),ge=m.a.map(["char_group","classic","edge_ngram","keyword","letter","lowercase","ngram","path","pattern","simple_pattern","simple_pattern_split","standard","uax_url_email","whitespace"],ye),be=m.a.map(["asciifolding","apostrophe","classic","common_ngrams","condition","decimal_digit","delimited_payload","edge_ngram","elision","flatten_graph","hunspell","keep","keep_types","keyword_marker","keyword_repeat","kstem","length","limit","lowercase","min_hash","multiplexer","ngram","pattern_capture","pattern_replace","phonetic","predicate_token_filter","porter_stem","remove_duplicates","reverse","shingle","snowball","stemmer","stemmer_override","stop","synonym","synonym_graph","trim","truncate","unique","uppercase","word_delimiter","word_delimiter_graph"],ye),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).editorWillMount=a.editorWillMount.bind(Object(d.a)(a)),a.onAnalyzerChange=a.onDefinitionChange.bind(Object(d.a)(a),"analyzer"),a.onCharFilterChange=a.onDefinitionChange.bind(Object(d.a)(a),"char_filter"),a.onTokenizerChange=a.onDefinitionChange.bind(Object(d.a)(a),"tokenizer"),a.onTokenFilterChange=a.onDefinitionChange.bind(Object(d.a)(a),"filter"),a.onDefinitionChange=a.onDefinitionChange.bind(Object(d.a)(a)),a.onTabChange=a.onTabChange.bind(Object(d.a)(a)),a.state=Object(J.a)({editorContent:e.content&&JSON.stringify(e.content,null,2),selectedTab:1},ke(e.content)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"editorWillMount",value:function(e){}},{key:"onTabChange",value:function(e,t){this.setState({selectedTab:t}),1===t&&this.setState(Object(J.a)({editorContent:this.refs.monaco.editor.getValue()},ke(this.refs.monaco.editor.getValue())))}},{key:"onDefinitionChange",value:function(e,t){var a,n=this.state,i=n.analyzer,r=n.char_filter,o=n.filter,l=n.tokenizer;"analyzer"===e&&"custom"===t.value&&(r=l=o=void 0),this.setState((a={},Object(D.a)(a,e,t),Object(D.a)(a,"editorContent",JSON.stringify(Object(D.a)({analyzer:"custom"!==m.a.get(i,"value")?m.a.get(i,"value"):void 0,char_filter:r?r.map(function(e){return e.value}):void 0,filter:o?o.map(function(e){return e.value}):void 0,tokenizer:m.a.get(l,"value")},e,m.a.isArray(t)?m.a.map(t,function(e){return e.value}):t),null,2)),a))}},{key:"render",value:function(){var e=this.state,t=e.analyzer,a=e.char_filter,n=e.editorContent,r=e.filter,o=e.tokenizer,l=e.selectedTab;function s(e){var t=e.children,a=e.tabIdx;return i.a.createElement(U.a,{hidden:l!==a},t)}return i.a.createElement("div",null,i.a.createElement(b.a,{position:"static",color:"default"},i.a.createElement(Y.a,{indicatorColor:"primary",onChange:this.onTabChange,textColor:"primary",value:l,variant:"fullWidth"},i.a.createElement(Z.a,{icon:i.a.createElement(H.a,null)}),i.a.createElement(Z.a,{icon:i.a.createElement(Q.a,null)}))),i.a.createElement(s,{tabIdx:0},i.a.createElement(L.a,{defaultValue:n,editorWillMount:this.editorWillMount,height:200,language:"json",ref:"monaco",theme:"vs-dark"})),i.a.createElement(s,{tabIdx:1},i.a.createElement(X.a,{elevation:3,square:!0,style:{paddingTop:20,paddingBottom:40}},i.a.createElement(y.a,null,i.a.createElement(he,{onChange:this.onAnalyzerChange,options:me,placeholder:"Select an analyzer type:",value:t})),i.a.createElement("div",{style:{visibility:"custom"!==m.a.get(t,"value")&&"hidden"}},i.a.createElement(y.a,null,i.a.createElement(he,{onChange:this.onTokenizerChange,options:ge,placeholder:"Select a tokenizer:",value:o})),i.a.createElement(y.a,null,i.a.createElement(he,{isMulti:!0,onChange:this.onCharFilterChange,options:fe,placeholder:"Select a character filter:",value:a})),i.a.createElement(y.a,null,i.a.createElement(he,{isMulti:!0,onChange:this.onTokenFilterChange,options:be,placeholder:"Select a token filter:",value:r}))))))}}]),t}(i.a.Component);function ye(e){return e?m.a.isArray(e)?m.a.map(e,ye):{label:B.a.humanize(e),value:e}:e}function ke(e){var t=(m.a.isString(e)?JSON.parse(e):e)||{},a=t.char_filter,n=t.filter,i=t.tokenizer;return{analyzer:ye("custom"),char_filter:ye(a),filter:ye(n),tokenizer:ye(i)}}var Ce=a(62),Ee=a.n(Ce),Oe=a(93),je=a.n(Oe),Se="https://hear2learn.azurewebsites.net/_analyze";function _e(e,t){var a=e.definition;return je.a.post(Se,Object(J.a)({},a,{text:t})).then(function(t){var a=t.data.tokens;return m.a.assign({},e,{tokens:a})})}var ze=Object(j.a)(function(e){return{chip:{margin:e.spacing(1)}}}),xe="visual",Te="New Analyzer",we=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mode:e.mode||xe,name:e.name||Te},a.onChange=a.onChange.bind(Object(d.a)(a)),a.onEdit=a.onEdit.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onEdit",value:function(){this.setState({mode:"edit"})}},{key:"onChange",value:function(){var e=this.props.onChange,t=JSON.parse(this.refs.editor.refs.monaco.editor.getValue());this.setState({mode:xe,name:this.nameField.value}),m.a.isFunction(e)&&e({definition:t,name:this.nameField.value})}},{key:"inEditMode",value:function(){return"edit"===this.state.mode}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.definition,r=t.description,o=t.onClose,l=this.state.name;return i.a.createElement(z.a,{className:a},i.a.createElement(w.a,{action:i.a.createElement(x.a,{disableSpacing:!0},this.inEditMode()?i.a.createElement(W.a,{onClick:this.onChange},i.a.createElement(M.a,null)):i.a.createElement(W.a,{onClick:this.onEdit},i.a.createElement(V.a,null)),i.a.createElement(W.a,{onClick:o},i.a.createElement(P.a,null))),subheader:!this.inEditMode()&&r,title:this.inEditMode()?i.a.createElement(C.a,{inputRef:function(t){return e.nameField=t},defaultValue:l}):l}),i.a.createElement(T.a,null,this.inEditMode()?i.a.createElement(ve,{content:n,ref:"editor"}):i.a.createElement(Pe,this.props)))}}]),t}(i.a.Component);var Fe,Ae=(Fe=we,function(e){function t(e){var a;Object(l.a)(this,t);var n=e.definition,i=e.tokens;return(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=a.onChange.bind(Object(d.a)(a)),a.updateAnalysis=a.updateAnalysis.bind(Object(d.a)(a)),a.state={definition:n,tokens:i},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateAnalysis()}},{key:"onChange",value:function(e){var t=e.definition;this.setState({definition:t},this.updateAnalysis)}},{key:"updateAnalysis",value:function(){var e=this,t=this.props.text,a=this.state.definition,n=function(e){var t=e.analyzer,a=e.char_filter,n=e.filter,i=e.tokenizer;return m.a.compact([t&&"Analyzer: ".concat(t),i&&"Tokenizer: ".concat(i),a&&"Character Filters: ".concat(m.a.castArray(a).join(" + ")),n&&"Filters: ".concat(m.a.castArray(n).join(" + "))]).join(", ")}(a);_e({definition:a},t).then(function(t){var a=t.tokens;e.setState({description:n,tokens:a})})}},{key:"render",value:function(){var e=this.state,t=e.definition,a=e.description,n=e.tokens;return i.a.createElement(Fe,Object.assign({},this.props,{definition:t,description:a,onChange:this.onChange,tokens:n}))}}]),t}(i.a.Component)),Pe=function(e){var t=e.onTokenSelect,a=e.selectedStartOffset,n=e.tokens,r=ze(),o=m.a.map(n,function(e){return i.a.createElement(F.a,{avatar:i.a.createElement(_.a,null,e.start_offset),className:r.chip,color:a===e.start_offset?"primary":void 0,key:e.start_offset,label:e.token,onClick:function(){return t(e.start_offset)}})});return i.a.createElement(i.a.Fragment,null,o)};var Ne=a(97),Me=a.n(Ne),Ie=a(98),Ve=a.n(Ie),We=a(100),De=Object(We.a)({palette:{primary:{main:Me.a[900]},secondary:{main:Ve.a[700]}}}),Je="<p>The quick brown fox jumps over the quick dog.</p>",qe=[{mode:"edit",name:"Standard Analyzer",definition:{analyzer:"standard"},key:g()()},{name:"Stop Analyzer",definition:{analyzer:"stop"},key:g()()},{name:"Custom Analyzer",definition:{tokenizer:"standard",char_filter:["html_strip"],filter:["lowercase","kstem"]},key:g()()}],Be=Object(j.a)(function(e){return{app:{backgroundColor:"#fbfbfb"},appBarSpacer:e.mixins.toolbar,chip:{margin:e.spacing(1)},section:{marginBottom:e.spacing(4),marginTop:e.spacing(4)}}}),Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={text:Je,analyses:qe},a.createCloseFn=a.createCloseFn.bind(Object(d.a)(a)),a.onAdd=a.onAdd.bind(Object(d.a)(a)),a.onChange=m.a.debounce(a.onChange.bind(Object(d.a)(a)),750),a.onClose=a.onClose.bind(Object(d.a)(a)),a.onTokenSelect=a.onTokenSelect.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"createCloseFn",value:function(e){var t=this;return function(){t.onClose(e)}}},{key:"onClose",value:function(e){var t=this.state.analyses;this.setState({analyses:m.a.filter(t,function(t,a){return t.key!==e&&e!==a})})}},{key:"onChange",value:function(){var e=this,t=this.state;(function(e,t){return Ee.a.mapSeries(e,function(e){return _e(e,t).catch(function(t){return console.error("Unable to fetch updated analysis for:",e),Ee.a.resolve(e)})})})(t.analyses,t.text).then(function(t){return e.setState({analyses:t})})}},{key:"onAdd",value:function(){var e=this.state.analyses,t=m.a.assign({},e[0],{key:g()(),mode:"edit"});this.setState({analyses:m.a.concat(t,e)})}},{key:"onTokenSelect",value:function(e){var t=this.state.selectedStartOffset===e?null:e;this.setState({selectedStartOffset:t})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.analyses,r=a.selectedStartOffset,o=a.text;return i.a.createElement(S.a,{theme:De},i.a.createElement("div",{className:t.app},i.a.createElement(b.a,{position:"absolute"},i.a.createElement(E.a,null,i.a.createElement(O.a,{variant:"h6"},"Elasticsearch Analysis Inspector"))),i.a.createElement("div",{className:t.appBarSpacer}),i.a.createElement(k.a,{container:!0},i.a.createElement(k.a,{item:!0,xs:12},i.a.createElement(y.a,{className:t.section},i.a.createElement(C.a,{defaultValue:o,fullWidth:!0,label:"Text",onChange:function(t){var a=t.target.value;t.persist(),e.setState({text:a},e.onChange)},variant:"outlined"}))),i.a.createElement(k.a,{item:!0,xs:12},i.a.createElement(y.a,null,i.a.createElement(v.a,{variant:"contained",color:"secondary",onClick:this.onAdd,style:{float:"right"}},"New Analyzer"))),i.a.createElement(k.a,{item:!0,xs:12},i.a.createElement(y.a,null,m.a.map(n,function(a){return i.a.createElement(Ae,Object.assign({},a,{className:t.section,key:a.key,onClose:e.createCloseFn(a.key),onTokenSelect:e.onTokenSelect,selectedStartOffset:r,text:o}))}))))))}}]),t}(i.a.Component);var Le=function(e){var t=Be();return i.a.createElement(Re,Object.assign({classes:t},e))},Ue=document.getElementById("root");o.a.render(i.a.createElement(Le,null),Ue)}},[[112,1,2]]]);
//# sourceMappingURL=main.d3cd0773.chunk.js.map